function initSearch(e){function t(){document.querySelector(e.rootElement).querySelectorAll(".placeholder").forEach(e=>{e.classList.remove("placeholder-wave"),e.classList.remove("placeholder")})}return new Vue({el:e.rootElement,searchInputId:e.searchInputId,data:{searchTerm:"",isOpen:!1,placeholderResults:e.placeholderResults,results:[],selected:null,timerId:null,isTyping:!1},computed:{isDisplayPlaceholder(){return this.searchTerm.length<=e.searchTermMaxLength||this.isTyping},isNoResults(){return 0===this.results.length&&this.searchTerm.length>e.searchTermMaxLength},categories(){return[...new Set(this.results.map(e=>e.category))].sort(t=>e.categoriesInfo[t-1].priority).map(e=>parseInt(e))}},watch:{searchTerm:function(t){var r=this;t.length>e.searchTermMaxLength?(r.isTyping=!0,clearTimeout(r.timerId),r.timerId=setTimeout(()=>{fetch(`${e.apiUrl}?term=${t}&callingPage=${e.page}`).then(e=>e.json()).then(e=>{r.isOpen=!0,r.results=e.results||[]}).catch(e=>{console.log(e),r.isOpen=!1,r.results=[]}).then(()=>r.isTyping=!1)},e.delayBeforeInvoke)):(r.isOpen=!1,r.results=[])}},methods:{getCategoryResults:function(e){return this.results.filter(t=>t.category===e).sort(e=>e.order)},toCategoryName:t=>e.categoriesInfo[t-1].name,onInstrumentClick:(e,t)=>{var r=t.target.dataset.instrument;sendAnalyticsEvent("GlobalSearch",e?"PlaceholderClick":"ResultClick",r)}},directives:{"instrument-icon":instrumentIconDirective()},mounted:function(){this.$nextTick(function(){this.$el.querySelector(this.$options.searchInputId).focus()}),t()},updated:()=>{t()}})}function debounce(e,t){var r=null;return function(){clearTimeout(r);var s=arguments,n=this;r=setTimeout(function(){e.apply(n,s)},t)}}